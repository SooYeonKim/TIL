# 멀리 있는 컴퓨터끼리는 이렇게 데이터를 주고받는다 - IP 프로토콜 구조

> "따라하면서 배우는 IT - 네트워크 기초(개정판)"을 듣고 정리한 내용입니다.
>
> https://www.youtube.com/playlist?list=PL0d8NnikouEWcF1jJueLdjRIC4HsUlULi

## IPv4 프로토콜
### IPv4가 하는 일
- 네트워크 상에서 데이터를 교환하기 위한 프로토콜
- 데이터가 정확하게 전달될 것을 보장하지 않는다.
- 중복된 패킷을 전달하거나 패킷의 순서를 잘못 전달할 가능성도 있다. (악의적으로 이용되면 DoS 공격이 됨)
- 데이터의 정확하고 순차적인 전달은 그보다 상위 프로토콜인 TCP에서 보장한다.

### IPv4 프로토콜의 구조
- 다른 네트워크의 특정 대상을 찾는 IPv4 프로토콜
<br><img src="./img/06_IPv4 프로토콜의 구조.PNG" height="200px">
    - IP Flags
        - D: 패킷을 보낼 때 데이터를 안 쪼개서 보내겠다고 명시하는 것
        - M: 패킷을 쪼개서 보낼 때 첫 번째 패킷 뒤에 패킷이 더 있다는 것을 알려줌 (최대 전송 단위보다 크지 않은 패킷을 보내면 0으로 해서 한 번만 보내면 끝이고, 여러 번 쪼개서 보내야 하는 경우 1로 세팅)
    - Fragment Offset
        - 쪼갠 데이터를 원래대로 복구하기 위한 순서를 지정
        - 시작 부분으로 부터 얼만큼 떨어져 있는지 나타냄
    - Protocol
        - 상위 프로토콜을 알려줌
        - ICMP(3계층) - 01, TCP(4계층) - 06, UDP(4계층) - 17
    - Header Checksum
        - 이 헤더가 오류가 있는지 없는지를 체크